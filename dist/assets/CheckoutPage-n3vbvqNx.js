import{r as l,j as e,c as j,u as y,M as N,C as b}from"./index-CS_f-Xwr.js";import{S as g}from"./SectionQuality-Cz9FlPK-.js";function v(s){const[r,d]=l.useState({street:"",city:"",state:""}),[c,x]=l.useState(!1);return l.useEffect(()=>{const m=async()=>{x(!0);try{const n=await(await fetch(`https://viacep.com.br/ws/${s}/json/`)).json();n.erro?d({street:"",city:"",state:""}):d({street:n.logradouro,city:n.localidade,state:n.uf})}catch{d({street:"",city:"",state:""})}x(!1)};s.length===8&&m()},[s]),{address:r,isFetching:c}}function w({},s){const[r,d]=l.useState({firstName:"",lastName:"",email:"",zipCode:"",country:"",streetAddress:"",townCity:"",state:""}),{address:c,isFetching:x}=v(r.zipCode);l.useEffect(()=>{!x&&c.street&&c.city&&c.state&&d(i=>({...i,streetAddress:c.street,townCity:c.city,state:c.state}))},[c,x]);const[m,u]=l.useState({firstName:"",lastName:"",email:"",zipCode:"",country:"",streetAddress:"",townCity:"",state:""});l.useImperativeHandle(s,()=>({validate(){const i={firstName:"",lastName:"",email:"",zipCode:"",country:"",streetAddress:"",townCity:"",state:""};let h=!0;const f=/^[A-Za-z\s]{2,}$/,p=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return f.test(r.firstName)||(i.firstName="This name is not valid",h=!1),f.test(r.lastName)||(i.lastName="This name is not valid",h=!1),p.test(r.email)||(i.email="Invalid email",h=!1),u(i),h}}));const n=l.useCallback(i=>{const{name:h,value:f}=i.target;d(p=>({...p,[h]:f}))},[]),t="flex flex-col gap-4",o="font-bold text-base",a="border-2 border-gray-300 h-16 rounded-lg text-gray-700 pl-6";return e.jsx("div",{className:"lg:w-9/12 lg:px-5 xl:w-5/12 xl:mr-24 xl:px-0 xl:pr-0",children:e.jsxs("form",{className:"flex flex-col gap-8 py-10",children:[e.jsxs("div",{className:"xl:flex xl:flex-row",children:[e.jsxs("div",{id:"container-form-input",className:`${t} xl:w-5/12 xl:mr-10`,children:[e.jsx("label",{htmlFor:"firstName",className:`${o}`,children:"First Name"}),e.jsxs("div",{id:"container-warning",className:"flex flex-col",children:[e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:n,className:`${a}`}),m.firstName&&e.jsx("span",{className:"text-red-500",children:m.firstName})]})]}),e.jsxs("div",{className:`${t} xl:w-6/12`,children:[e.jsx("label",{htmlFor:"lastName",className:o,children:"Last Name"}),e.jsxs("div",{id:"container-warning",className:"flex flex-col",children:[e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:n,className:`${a}`}),m.lastName&&e.jsx("span",{className:"text-red-500 mt-0",children:m.lastName})]})]})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"company-name",className:o,children:"Company Name (Optional)"}),e.jsx("input",{type:"text",id:"company-name",name:"company-name",className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"zip-code",className:o,children:"ZIP code"}),e.jsx("input",{type:"text",id:"zip-code",name:"zipCode",value:r.zipCode,onChange:n,className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"country",className:o,children:"Country / Region"}),e.jsx("input",{type:"text",id:"country",name:"country",value:r.country,onChange:n,className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"street-address",className:o,children:"Street address"}),e.jsx("input",{type:"text",id:"street-address",name:"streetAddress",value:r.streetAddress,onChange:n,className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"town-city",className:o,children:"Town / City"}),e.jsx("input",{type:"text",id:"town-city",name:"townCity",value:r.townCity,onChange:n,className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"state",className:o,children:"Province"}),e.jsx("input",{type:"text",id:"state",name:"state",value:r.state,onChange:n,className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"add-on-address",className:o,children:"Add-on address"}),e.jsx("input",{type:"text",id:"add-on-address",name:"addOnAddress",className:a})]}),e.jsxs("div",{className:`${t}`,children:[e.jsx("label",{htmlFor:"email",className:o,children:"Email address"}),e.jsxs("div",{id:"container-warning",className:"flex flex-col",children:[e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:n,className:a}),m.email&&e.jsx("span",{className:"text-red-500",children:m.email})]})]}),e.jsx("textarea",{id:"additional-info",name:"additional-info",className:`${a} mt-5 flex pt-5 `,placeholder:"Additional information"})]})})}const k=l.forwardRef(w);function C({validateForm:s}){const[r,d]=l.useState(!1),[c,x]=l.useState(!1),{user:m}=j(),u=y();l.useEffect(()=>{fetch("http://localhost:3001/cart").then(a=>a.json()).then(a=>x(a.length===0))},[]);const n=l.useCallback(()=>{s()&&d(!0)},[s]),t=l.useCallback(()=>{fetch("http://localhost:3001/cart").then(a=>a.json()).then(a=>{if(a.length>0){const i=a.map(h=>fetch(`http://localhost:3001/cart/${h.id}`,{method:"DELETE"}));return Promise.all(i)}})},[]),o=l.useCallback(()=>{t(),d(!1),u("/")},[t,u]);return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"w-full mx-auto border-2 border-black py-4 rounded-2xl text-xl mb-16 md:w-80 md:mr-52 lg:mx-auto hover-white-custom",onClick:n,disabled:c,children:"Place Order"}),c&&e.jsx("p",{className:"text-red-600 text-center mb-14 lg:mx-auto",children:"The cart is empty."}),e.jsx(N,{isOpen:r,onRequestClose:o,contentLabel:"Validation Success",style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)"},content:{color:"black",maxWidth:"31.25rem",height:"30rem",margin:"auto",textAlign:"center",borderRadius:"10px"}},children:e.jsxs("div",{className:"bg-white rounded-xl py-10",children:[e.jsx("h2",{className:"text-xl mb-4 font-bold xl:text-4xl text-rose-800",children:"Congratulations"}),e.jsx("p",{className:"text-2xl mb-4 text-black font-semibold ",children:m?m.firstName:"Guest"}),e.jsx("p",{className:"text-black text-sm md:text-2xl mb-10",children:"We are happy to know that we left your space with more style and refinement."}),e.jsx("button",{className:"bg-white text-black py-4 px-4 w-8/12 mb-10 text-2xl rounded-lg hover:bg-black hover:text-white border-2 border-black",onClick:o,children:"Close"})]})})]})}function T(){const[s,r]=l.useState([]),[d,c]=l.useState(0),[x,m]=l.useState(0);l.useEffect(()=>{fetch("http://localhost:3001/cart").then(t=>t.json()).then(t=>{r(t),u(t)}).catch(()=>{})},[]);const u=t=>{let o=0,a=0;t.forEach(i=>{const h=i.originalPrice*i.quantity,f=(i.discountedPrice>0?i.discountedPrice:i.originalPrice)*i.quantity;o+=h,a+=f}),c(o),m(a)},n=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"}).replace("$","Rs. ");return e.jsx("article",{className:"h-auto py-8 border-b-2 mx-auto w-11/12 md:w-6/12 lg:w-11/12 lg:borde-2 pl-0 lg:pl-0 xl:w-full xl:pl-10",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-36 text-start text-2xl font-medium pb-4 md:w-7/12 lg:w-8/12 ",children:"Product"}),e.jsx("th",{className:"text-right pb-4 text-2xl font-medium w-48",children:"Subtotal"})]})}),e.jsxs("tbody",{children:[s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"text-center text-2xl py-10",children:"Cart is empty"})}):s.map(t=>e.jsxs("tr",{children:[e.jsx("th",{className:"text-start text-gray-400 pb-4 font-normal",children:e.jsxs("p",{children:[t.name,e.jsx("span",{className:"text-black mx-2",children:" x "}),e.jsx("span",{className:"text-black",children:t.quantity})]})}),e.jsx("td",{className:"text-right pb-5",children:e.jsx("p",{children:n((t.discountedPrice>0?t.discountedPrice:t.originalPrice)*t.quantity)})})]},t.id)),e.jsxs("tr",{children:[e.jsx("th",{className:"text-left font-normal",children:"Subtotal"}),e.jsx("td",{className:"",children:e.jsx("p",{className:"text-right",children:n(d)})})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-left font-normal pt-4",children:"Total"}),e.jsx("td",{children:e.jsx("p",{className:"pt-4 font-bold text-lg text-Goldenrod text-right xl:text-2xl xl:w-80",children:n(x)})})]})]})]})})}function $(){const[s,r]=l.useState(null),d=l.useCallback(x=>{r(x.target.value)},[]),c=x=>{switch(x){case"bankTransfer1":return"Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account.";case"bankTransfer2":return"Ensure the payment is made with the correct reference to avoid any delays.";case"cashOnDelivery":return"Cash on delivery is a type of transaction in which the recipient makes payment for a good at the time of delivery.";default:return""}};return e.jsxs("article",{className:"py-10 space-y-5 lg:w-11/12lg:pr-14 xl:w-full xl:pl-7",children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"bankTransfer1",name:"paymentMethod",value:"bankTransfer1",checked:s==="bankTransfer1",onChange:d,className:"form-radio accent-black"}),e.jsx("label",{htmlFor:"bankTransfer1",className:`ml-2 ${s==="bankTransfer1"?"text-black":"text-gray-400"}`,children:"Direct Bank Transfer"}),s==="bankTransfer1"&&e.jsx("p",{className:"text-gray-400 text-justify w-10/12 mt-3 lg:w-full",id:"text-selected",children:c("bankTransfer1")})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"bankTransfer2",name:"paymentMethod",value:"bankTransfer2",checked:s==="bankTransfer2",onChange:d,className:"form-radio accent-black"}),e.jsx("label",{htmlFor:"bankTransfer2",className:`ml-2 ${s==="bankTransfer2"?"text-black":"text-gray-400"}`,children:"Direct Bank Transfer"}),s==="bankTransfer2"&&e.jsx("p",{className:"text-gray-400 text-justify w-8/12 mt-3 lg:w-full",id:"text-selected",children:c("bankTransfer2")})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"cashOnDelivery",name:"paymentMethod",value:"cashOnDelivery",checked:s==="cashOnDelivery",onChange:d,className:"form-radio accent-black"}),e.jsx("label",{htmlFor:"cashOnDelivery",className:`ml-2 text-justify ${s==="cashOnDelivery"?"text-black":"text-gray-400"}`,children:"Cash On Delivery"}),s==="cashOnDelivery"&&e.jsx("p",{className:"text-gray-400 text-justify w-8/12 mt-3 lg:w-full",id:"text-selected",children:c("cashOnDelivery")})]}),e.jsxs("p",{className:"text-justify md:w-10/12 md:mx-auto lg:w-full",children:["Your personal data will be used to support your experience throughout this website, to manage access to your account, and for other purposes described in our ",e.jsx("span",{className:"font-semibold",children:"privacy policy."})]})]})}function O(){const s=l.useRef(null),r=l.useCallback(()=>s.current?s.current.validate():!1,[]);return e.jsxs("section",{children:[e.jsx(b,{title:"Checkout"}),e.jsxs("main",{children:[e.jsxs("article",{className:"flex flex-col pt-5 max-w-screen-2xl xl:mx-auto",children:[e.jsx("h3",{className:"text-4xl font-semibold text-center py-5 xl:text-left xl:ml-32 mt-10",children:"Billing details"}),e.jsx("main",{className:"px-4 lg:px-10 flex flex-col xl:w-10/12 xl:px-0 xl:mx-auto",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-6 lg:justify-center xl:gap-0 xl:justify-start ",children:[e.jsx(k,{ref:s}),e.jsxs("div",{className:"flex flex-col justify-start items-center",children:[e.jsx(T,{}),e.jsx($,{}),e.jsx(C,{validateForm:r})]})]})})]}),e.jsx(g,{})]})]})}export{O as default};
