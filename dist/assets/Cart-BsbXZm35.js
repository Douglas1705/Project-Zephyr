import{r as s,u as w,a as C,j as t,T as y,A as N}from"./index-DfyxK9sV.js";import{C as v}from"./PagesCape-Owmijy4M.js";import{C as k}from"./CounterCards-D9eZT7wG.js";import{S}from"./SectionQuality-DAjtVenT.js";function R(){const[c,o]=s.useState([]),[d,f]=s.useState(0),i=w(),{isSignedIn:m}=C(),r=s.useCallback(e=>{const a=e.reduce((n,l)=>n+l.quantity*(l.discountedPrice||l.originalPrice),0);f(a)},[]);s.useEffect(()=>{fetch("http://localhost:3001/cart").then(e=>e.json()).then(e=>{o(e),r(e)}).catch(()=>{})},[r]);const p=s.useCallback((e,a)=>{const n=c.map(l=>l.id===e?{...l,quantity:a}:l);o(n),fetch(`http://localhost:3001/cart/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c.find(l=>l.id===e),quantity:a})}).catch(()=>{}),r(n)},[c,r]),u=s.useCallback(e=>{const a=c.filter(n=>n.id!==e);o(a),fetch(`http://localhost:3001/cart/${e}`,{method:"DELETE"}).catch(()=>{}),r(a)},[c,r]),x=e=>e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),j=s.useCallback(()=>{i(m?"/checkout":"/sign-in")},[m,i]),g=s.useCallback(e=>a=>{p(e,a)},[p]),h=s.useCallback(e=>{u(e)},[u]),b=s.useCallback(e=>a=>{h(e)},[h]);return t.jsxs("section",{children:[t.jsx(v,{title:"Cart"}),t.jsxs("article",{className:"xl:flex xl py-10 xl:px-20 xl:gap-10 max-w-screen-2xl xl:mx-auto",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center h-14 bg-warm-cream md:gap-16 lg:gap-18 xl:w-[817px] xl:gap-24",children:[t.jsx("p",{children:"Product"}),t.jsx("p",{children:"Price"}),t.jsx("p",{className:"lg:pl-10 xl:pl-10",children:"Quantity"}),t.jsx("p",{children:"Subtotal"})]}),t.jsx("div",{children:c.length===0?t.jsx("p",{className:"text-center text-2xl py-10",children:"Cart is empty"}):c.map(e=>t.jsxs("div",{className:"flex flex-col flex-wrap items-center py-5 px-2 gap-8 border-y-4 md:flex-row xl:border-y-0 lg:justify-start lg:w-[818px] lg:mx-auto",children:[t.jsx("img",{src:e.imageUrl,alt:e.name,className:"md:w-28 w-[111px] rounded-xl"}),t.jsx("p",{className:"text-4xl text-gray-500 md:w-[100px] md:text-base lg:w-[100px] lg:flex-wrap ",children:e.name}),t.jsxs("div",{className:"flex flex-wrap flex-col md:flex-row items-center justify-between space-y-5 md:gap-5 lg:w-[450px] md:space-y-0 ",children:[t.jsxs("p",{className:"w-auto h-auto text-2xl text-gray-500 pb-10 md:text-base md:pb-0 md:w-[145px]",children:["RS."," ",x(e.discountedPrice||e.originalPrice)]}),t.jsx(k,{className:"xl:py-1",initialCount:e.quantity,onCountChange:g(e.id)}),t.jsx("p",{className:"text-2xl mx-auto md:text-base w-auto h-auto ",children:x(e.quantity*(e.discountedPrice||e.originalPrice))})]}),t.jsx(y,{onClick:b(e.id),className:"cursor-pointer text-4xl text-yellow-700 md:w-full xl:w-auto hover:text-red-600"})]},e.id))})]}),t.jsxs("div",{className:"mt-10 xl:mt-0 bg-warm-cream mx-auto w-[393px] h-[390px] px-20 font-medium xl:mx-0",children:[t.jsx("h3",{className:"font-semibold text-3xl text-center mb-20 pt-4",children:"Cart Totals"}),t.jsxs("div",{className:"flex justify-between mb-7",children:[t.jsx("p",{children:"Subtotal"}),t.jsx("p",{className:"text-gray-400",children:x(d)})]}),t.jsxs("div",{className:"flex justify-between mb-10",children:[t.jsx("p",{children:"Total"}),t.jsx("p",{className:"text-xl text-Goldenrod",children:x(d)})]}),t.jsx(N,{onClick:j,className:"border-2 border-black rounded-xl py-4 w-full md:w-[222px] hover-white-custom",children:"Check Out"})]})]}),t.jsx(S,{})]})}export{R as default};
