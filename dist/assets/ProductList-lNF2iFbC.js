import{r as a,j as e,d as b,e as p,m as w}from"./index-DuG9Yahv.js";function v({message:s,onClose:i}){return a.useEffect(()=>{const t=setTimeout(i,3e3);return()=>clearTimeout(t)},[i]),e.jsx("div",{className:"fixed top-4 inset-x-0 mx-auto bg-green-500 text-white px-4 py-2 rounded shadow-lg text-center max-w-md",children:s})}function N({product:s,isOpen:i,onClose:t}){const[r,n]=a.useState(!1),[l,m]=a.useState(""),h=b(),d=p(o=>o.cart.cartItems),x=a.useRef(null),u=a.useCallback(()=>{const o=d.find(c=>c.id===s.id),f=d.find(c=>c.name===s.name);if(o||f)m("Product already added to cart!"),n(!0);else{const c={...s,quantity:1};h(w(c)),m("Product added to cart!"),n(!0),fetch("http://localhost:3001/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).catch(()=>{})}},[s,d,h]),g=a.useCallback(()=>{n(!1),t()},[t]),j=a.useCallback(()=>{window.location.href=`/single-product/${s.id}`},[s.id]);return a.useEffect(()=>{const o=f=>{x.current&&!x.current.contains(f.target)&&t()};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[t]),i?e.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center",children:e.jsxs("div",{ref:x,className:"relative bg-gray-900 bg-opacity-55 p-6 rounded-lg shadow-lg w-full h-full flex flex-col justify-center items-center",children:[e.jsx("button",{className:"absolute top-0 right-0 mt-4 mr-4 text-white text-4xl hover:text-red-400",onClick:t,children:"Ã—"}),e.jsxs("div",{className:"flex flex-col space-y-8 items-center z-0",children:[e.jsx("button",{onClick:u,className:"bg-white text-Goldenrod hover:bg-Goldenrod hover:text-white py-3 w-10/12 font-semibold",children:"Add to cart"}),e.jsx("button",{onClick:j,className:"bg-white text-Goldenrod w-10/12 py-3 hover:bg-Goldenrod hover:text-white font-semibold",children:"View Product"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 hover:border-b-2 hover:border-white",children:[e.jsx("img",{src:"https://compasschallenge-furniro-images.s3.us-east-2.amazonaws.com/images/icons-globals/gridicons_share.svg",alt:"Share icon",width:16}),e.jsx("p",{className:"text-white cursor-pointer",children:"Share"})]}),e.jsxs("div",{className:"flex gap-1 hover:border-b-2 hover:border-white",children:[e.jsx("img",{src:"https://compasschallenge-furniro-images.s3.us-east-2.amazonaws.com/images/icons-globals/Vector-compare.svg",alt:"Compare icon",width:16}),e.jsx("p",{className:"text-white",children:"Compare"})]}),e.jsxs("div",{className:"flex gap-1 hover:border-b-2 hover:border-white",children:[e.jsx("img",{src:"https://compasschallenge-furniro-images.s3.us-east-2.amazonaws.com/images/icons-globals/Heart.svg",alt:"Like icon",width:16}),e.jsx("p",{className:"text-white",children:"Like"})]})]})]}),r&&e.jsx(v,{message:l,onClose:g})]})}):null}function y({product:s}){const[i,t]=a.useState(!1),r=a.useCallback(()=>{t(!0)},[]),n=a.useCallback(()=>{t(!1)},[]);return e.jsxs("article",{className:"relative mb-10",children:[e.jsxs("figure",{className:"relative bg-gray-100",onClick:r,children:[e.jsx("img",{src:s.imageUrl,alt:s.name}),s.discount>0&&e.jsxs("span",{className:"absolute top-5 right-5 bg-red-400 px-2 py-4 rounded-full text-white",children:["-",s.discount,"%"]}),s.new==="New"&&e.jsx("span",{className:"absolute top-5 right-5 bg-teal-500 px-3 py-4 rounded-full text-white",children:"New"}),e.jsxs("div",{className:"p-3 flex flex-col gap-3",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.description}),e.jsx("div",{className:"flex justify-between",children:s.discountedPrice>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl font-semibold",children:["RP ",s.discountedPrice.toLocaleString()]}),e.jsxs("p",{className:"text-gray-400 line-through",children:["RP ",s.originalPrice.toLocaleString()]})]}):e.jsxs("p",{className:"text-xl font-semibold",children:["RP ",s.originalPrice.toLocaleString()]})})]})]}),e.jsx(N,{product:s,isOpen:i,onClose:n})]})}function P({products:s,limit:i}){const[t,r]=a.useState(s||[]);a.useEffect(()=>{let l=!0;return s?r(s):(async()=>{const d=await(await fetch("http://localhost:3001/products")).json();l&&r(d)})(),()=>{l=!1}},[s]);const n=i?t.slice(0,i):t;return!t||t.length===0?e.jsx("div",{className:"flex items-center justify-center text-center h-96",children:e.jsx("div",{className:"text-4xl font-bold",children:"No products available :("})}):e.jsx("div",{className:"flex flex-col items-center sm:flex-row flex-wrap w-11/12 mx-auto gap-5 justify-center",children:n.map(l=>l?e.jsx(y,{product:l},l.key||l.id):null)})}export{v as C,P};
