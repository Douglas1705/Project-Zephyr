import{r as a,j as e,f as w,g as b,p,I as N,q as v,t as y}from"./index-CS_f-Xwr.js";function C({message:t,onClose:l}){return a.useEffect(()=>{const s=setTimeout(l,3e3);return()=>clearTimeout(s)},[l]),e.jsx("div",{className:"fixed top-4 inset-x-0 mx-auto bg-green-500 text-white px-4 py-2 rounded shadow-lg text-center max-w-md",children:t})}function P({product:t,isOpen:l,onClose:s}){const[r,i]=a.useState(!1),[n,x]=a.useState(""),h=w(),d=b(c=>c.cart.cartItems),m=a.useRef(null),u=a.useCallback(()=>{const c=d.find(o=>o.id===t.id),f=d.find(o=>o.name===t.name);if(c||f)x("Product already added to cart!"),i(!0);else{const o={...t,quantity:1};h(p(o)),x("Product added to cart!"),i(!0),fetch("http://localhost:3001/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{})}},[t,d,h]),g=a.useCallback(()=>{i(!1),s()},[s]),j=a.useCallback(()=>{window.location.href=`/single-product/${t.id}`},[t.id]);return a.useEffect(()=>{const c=f=>{m.current&&!m.current.contains(f.target)&&s()};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[s]),l?e.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center",children:e.jsxs("div",{ref:m,className:"relative bg-gray-900 bg-opacity-55 p-6 rounded-lg shadow-lg w-full h-full flex flex-col justify-center items-center",children:[e.jsx("button",{className:"absolute top-0 right-0 mt-4 mr-4 text-white text-4xl hover:text-red-400",onClick:s,children:"Ã—"}),e.jsxs("div",{className:"flex flex-col space-y-8 items-center z-0",children:[e.jsx("button",{onClick:u,className:"bg-white text-Goldenrod hover:bg-Goldenrod hover:text-white py-3 w-10/12 font-semibold",children:"Add to cart"}),e.jsx("button",{onClick:j,className:"bg-white text-Goldenrod w-10/12 py-3 hover:bg-Goldenrod hover:text-white font-semibold",children:"View Product"}),e.jsxs("div",{className:"flex item gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 hover:border-b-2 hover:border-white",children:[e.jsx(N,{className:"text-white"}),e.jsx("p",{className:"text-white cursor-pointer",children:"Share"})]}),e.jsxs("div",{className:"flex items-center gap-1 hover:border-b-2 hover:border-white",children:[e.jsx(v,{className:"text-white text-2xl"}),e.jsx("p",{className:"text-white",children:"Compare"})]}),e.jsxs("div",{className:"flex items-center gap-1 hover:border-b-2 hover:border-white",children:[e.jsx(y,{className:"text-white text-xl"}),e.jsx("p",{className:"text-white",children:"Like"})]})]})]}),r&&e.jsx(C,{message:n,onClose:g})]})}):null}function S({product:t}){const[l,s]=a.useState(!1),r=a.useCallback(()=>{s(!0)},[]),i=a.useCallback(()=>{s(!1)},[]);return e.jsxs("article",{className:"relative mb-10",children:[e.jsxs("figure",{className:"relative bg-gray-100 border-4 w-72 ",onClick:r,children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-80 w-full"}),t.discount>0&&e.jsxs("span",{className:"absolute top-5 right-5 bg-red-400 px-2 py-4 rounded-full text-white",children:["-",t.discount,"%"]}),t.new==="New"&&e.jsx("span",{className:"absolute top-5 right-5 bg-teal-500 px-3 py-4 rounded-full text-white",children:"New"}),e.jsxs("div",{className:"p-3 flex flex-col gap-3",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.description}),e.jsx("div",{className:"flex justify-between",children:t.discountedPrice>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl font-semibold",children:["RP ",t.discountedPrice.toLocaleString()]}),e.jsxs("p",{className:"text-gray-400 line-through",children:["RP ",t.originalPrice.toLocaleString()]})]}):e.jsxs("p",{className:"text-xl font-semibold",children:["RP ",t.originalPrice.toLocaleString()]})})]})]}),e.jsx(P,{product:t,isOpen:l,onClose:i})]})}function I({products:t,limit:l}){const[s,r]=a.useState(t||[]);a.useEffect(()=>{let n=!0;return t?r(t):(async()=>{const d=await(await fetch("http://localhost:3001/products")).json();n&&r(d)})(),()=>{n=!1}},[t]);const i=l?s.slice(0,l):s;return!s||s.length===0?e.jsx("div",{className:"flex items-center justify-center text-center h-96",children:e.jsx("div",{className:"text-4xl font-bold",children:"No products available :("})}):e.jsx("div",{className:"flex flex-col items-center sm:flex-row flex-wrap w-11/12 mx-auto gap-5 justify-center",children:i.map(n=>n?e.jsx(S,{product:n},n.key||n.id):null)})}export{C,I as P};
